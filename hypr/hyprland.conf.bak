$mainMod=SUPER
$sec_term=kitty -1   
$TERM=footclient
$editor=nvim 

$menu=tofi-drun --prompt 'Run:' | xargs swaymsg exec --
$emacs_clock_in=emacsclient -eval "(org-clock-in-last)"
$emacs_clock_out=emacsclient -eval "(org-clock-out)"
$lock_command=swaylock -e -i ~/Pictures/wp/defaultwp.jpg --indicator-thickness 5 

# monitors
monitor=,preferred,auto,auto

bind=$mainMod Control,2, exec, hyprctl keyword monitor "eDP-1, disable"
bind=$mainMod Control,1, exec, hyprctl keyword monitor "eDP-1, enable"

bind=$mainMod Control,3, exec, hyprctl keyword monitor "HDMI-A-1, disable"
bind=$mainMod Control,4, exec, hyprctl keyword monitor "HDMI-A-1, enable"


env=XDG_CURRENT_DESKTOP,Hyprland
env=XDG_SESSION_TYPE,wayland
env=XDG_SESSION_DESKTOP,Hyprland
env=GDK_BACKEND,wayland 
env=CLUTTER_BACKEND,wayland
env=QT_QPA_PLATFORM, wayland
env=PATH,"$HOME/.config/emacs/bin:$HOME/.local/bin:$PATH"

# For all categories,see https://wiki.hyprland.org/Configuring/Variables/
input {
    kb_layout=us
    kb_variant =
    kb_model =
    kb_options= caps:escape_shifted_capslock
    kb_rules =
    repeat_rate=30
    repeat_delay=200
    follow_mouse=0
    mouse_refocus=false
    sensitivity=1
    accel_profile=adaptive
    touchpad {
        disable_while_typing = false
        natural_scroll=no
    }
    sensitivity=0 # -1.0 - 1.0,0 means no modification.
}

general {
    gaps_in=0
    gaps_out=0
    border_size=1
    col.inactive_border=rgba(89b4fa00)
    col.active_border=rgba(e6b45066)
    layout=master
}

decoration {
    rounding=0
    blur { 
    enabled=no
    size=10
    passes=2
    new_optimizations=on
    }
}
 misc {
    disable_hyprland_logo=true
    disable_splash_rendering=false
    enable_swallow=true
    swallow_regex=^(footclient|kitty|foot)$
}

animations {
      enabled=yes
      bezier=slow,0,0.85,0.3,1
      bezier=overshot,0.7,0.6,0.1,1.1
      bezier=bounce,1,1.6,0.1,0.85
      bezier=winIn,0.1,1.1,0.1,1.1
      bezier=winOut,0.3,-0.3,0,1

      animation=windows,1,3,slow, popin
      animation=windowsIn,1,2,slow,popin
      animation=windowsOut,1,2,slow,slide
      animation=fadeIn,0,1,myBezier
      animation=fadeOut,0,7,myBezier
      animation=fadeShadow,0,1,myBezier
      animation=fadeSwitch,0,1,myBezier
      animation=border,0,9,default
      animation=workspaces,1,2,slow,slidevert
  }

dwindle {
    pseudotile=no 
    preserve_split=yes # you probably want this
    force_split=2
}
master {
    always_center_master=true
}
gestures {
    # See https://wiki.hyprland.org/Configuring/Variables/ for more
    workspace_swipe=yes
}
# Example per-device config
# See https://wiki.hyprland.org/Configuring/Keywords/#executing for more
device:epic mouse V1 {
    # sensitivity=1.5
}
# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more


windowrule=noanim,class:^(Brave)
windowrule=noanim,title:^(tofi
windowrulev2=noanim,class:^(brave)$
windowrulev2=float,class:^(brave)$,title:^(Save File)$
windowrulev2=float,class:^(brave)$,title:^(Open File)$
windowrulev2=float,title:^(Open File)$
windowrulev2=float,title:^(Open Folder)$
windowrulev2=workspace special:btop,title:^(btop)$
windowrule=float,thunar
windowrule=float,title:^(imgmenu)$
windowrule=float,pavucontrol
#windowrule=float,kitty
windowrule=float,title:^(nwg-look)$
windowrulev2=float,class:^()$,title:^(Picture in picture)$
windowrulev2=float,class:^(blueman-manager)$
windowrulev2=float,class:^(org.twosheds.iwgtk)$
windowrulev2=float,class:^(blueberry.py)$
windowrulev2=float,class:^(xdg-desktop-portal-gtk)$
windowrulev2=workspace 7, class:^(Brave-browser)$ 
windowrulev2=workspace 7, class:^(brave-browser)$ 
windowrulev2=workspace 9, class:^(UltimMC)$ 
windowrulev2=workspace 9, class:^(Minecraft)$ 
windowrulev2=workspace special:music, title:^(Music)$
windowrulev2=float, title:^(Music)$
windowrulev2=workspace 6, title:^(CONFIG)$
windowrulev2=noanim, title:^(tofi)$

#AUDIO
bind=,XF86AudioMute,exec,amixer set Master toggle && ~/.config/scripts/showstuff vol alsa
bind=,XF86AudioLowerVolume,exec,amixer set Master 5%- && ~/.config/scripts/showstuff vol alsa
bind=,XF86AudioRaiseVolume,exec,amixer set Master 2%+ && ~/.config/scripts/showstuff vol alsa
bindle=,XF86MonBrightnessUp,exec,light -A 2%; ~/.config/scripts/showstuff brightness
bindle=,XF86MonBrightnessDown,exec,light -U 2%; ~/.config/scripts/showstuff brightness

bind=$mainMod, Backspace, exec, dunstctl close



# BINDS
bind=$mainMod,Return,exec,$TERM
bind=$mainMod,Q,killactive,
bind=$mainMod Shift, Space,togglefloating,
bind=$mainMod,F,fullscreen
bind=$mainMod Control, L , exec , swaylock -e -i ~/Pictures/wp/defaultwp.jpg --indicator-thickness 5 
bind=$mainMod SHIFT,Return,exec,$sec_term
bind=$mainMod SHIFT,R,exec,hyprctl reload
bind=$mainMod, D,exec,$menu
bind=$mainMod CONTROL,B,exec,bluetoothctl connect B0:38:E2:35:25:B4 && notify-send -a "Bluetooth: " "Connected"

bind=$mainMod,h,movefocus,l
bind=$mainMod,l,movefocus,r
bind=$mainMod,k,movefocus,u
bind=$mainMod,j,movefocus,d


plugin {
    hy3 {
	tabs {
	    border_width = 1
	    col.active = rgba(33ccff20)
	    col.active.border = rgba(33ccffee)
	    col.inactive = rgba(30303020)
	    col.inactive.border = rgba(595959aa)
	    col.urgent = rgba(ff223340)
	    col.urgent.border = rgba(ff2233ee)
	}

	autotile {
	    enable = true
	    trigger_width = 800
	    trigger_height = 500
	}
    }
}

bind=$mainMod Shift, P, pin

bind=$mainMod, N,focuscurrentorlast
bind=$mainMod,1,workspace,1
bind=$mainMod,2,workspace,2
bind=$mainMod,3,workspace,3
bind=$mainMod,E,workspace,name:e
bind=$mainMod,B,workspace,6
bind=$mainMod,M,workspace,7
bind=$mainMod,8,workspace,8
bind=$mainMod,9,workspace,9
bind=$mainMod,0,workspace,10

bind=$mainMod SHIFT,1,movetoworkspace,1
bind=$mainMod SHIFT,2,movetoworkspace,2
bind=$mainMod SHIFT,3,movetoworkspace,3
bind=$mainMod SHIFT,E,movetoworkspace,name:e
bind=$mainMod SHIFT,C,movetoworkspace,6
bind=$mainMod SHIFT,M,movetoworkspace,7
bind=$mainMod SHIFT,8,movetoworkspace,8
bind=$mainMod SHIFT,9,movetoworkspace,9
bind=$mainMod SHIFT,0,movetoworkspace,10

bind=$mainMod SHIFT,k,workspace,e-1
bind=$mainMod SHIFT,j,workspace,e+1

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm=$mainMod,mouse:272,movewindow
bindm=$mainMod SHIFT,mouse:272,resizewindow

# Move windows
bind=$mainMod CONTROL,h,movewindow,l
bind=$mainMod CONTROL,l,movewindow,r
bind=$mainMod CONTROL,k,movewindow,u
bind=$mainMod CONTROL,j,movewindow,d


#LAYOUT 
# bind=$mainMod SHIFT,L,submap,layout
submap=layout
bind=,h,layoutmsg,orientationleft
bind=,l,layoutmsg,orientationright
bind=,j,layoutmsg,orientationbottom
bind=,k,layoutmsg,orientationtop
bind=,p,layoutmsg,swapwithmaster master 
bind =,a,layoutmsg,addmaster
bind=,r,layoutmsg,removemaster

bind=,l,submap,reset
bind=,p,submap,reset
bind=,h,submap,reset
bind=,j,submap,reset
bind=,k,submap,reset
bind=,a,submap,reset 
bind=,r,submap,reset
bind=,escape,submap,reset
submap=reset


#RESIZE
bind=$mainMod,R,submap,resize # will switch to a submap called resize
submap=resize # will start a submap called "resize"
binde=,l,resizeactive,20 0
binde=,h,resizeactive,-20 0
binde=,k,resizeactive,0 -20
binde=,j,resizeactive,0 20
bind=,escape,submap,reset # use reset to go back to the global submap
submap=reset 

#OPEN
bind=$mainMod,o,submap,open
submap=open
bind=,c,exec,code --enable-features=UseOzonePlatform --ozone-platform=wayland 
bind=,c,submap,reset
bind=,e,exec,emacsclient -c
bind=,e,submap,reset 
bind=,d, workspace, name:d
bind=,d, exec, ~/.local/bin/startVesktop
bind=,d, submap, reset
bind=,z, exec, ~/.config/scripts/dmenu_term.sh
bind=,f,workspace,6 
bind=,f,submap, reset
bind=,b,exec,$TERM -e "btop" 
bind=,b,submap,reset 
bind =,n,exec,~/Downloads/installed_applications/clion-2023.1.1/bin/clion.sh 
bind=,n,submap,reset 
bind=,escape,submap,reset 
bind=,t,exec,$TERM sh -c "tt -quotes en --theme one-dark "
bind=,t,submap,reset 
submap=reset 

#SCRIPTS
bind=$mainMod,s,submap,script
submap=script
    bind=, r, submap, reset; exec ~/.config/scripts/mode/sway-refile-to-workspace
    bind=, c, submap, reset; exec ~/.config/scripts/mode/sway-launch-with-slurp foot; 
    # bind=, m, exec, ~/.config/scripts/mpd.sh &
    # bind=, m,  submap, reset 
    bind=, p, exec, ~/.config/scripts/power.sh
    bind=, p, submap, reset

    bind=, s, exec, ~/.config/scripts/dmenu_term.sh -e ~/.config/scripts
    bind=, s, submap, reset
    bind=, h, exec, bluetoothctl connect B0:38:E2:35:25:B4
    bind=, h, submap, reset
    
    bind= , Print, submap, reset
    bind=,  Print, exec,  ~/.config/scripts/screenshot.sh

    bind=, p, exec,  ~/.config/scripts/passmenu.sh
    bind=, p, submap, reset

    bind=, t, submap, timer_map
    bind=, t, submap, timer_map

    bind=, n, submap, reset

    bind=, b, exec, ~/.config/scripts/bookman.sh --open 
    bind=, b, submap, reset

    bind=, n, exec,  ~/.config/scripts/bookman.sh -nw --open
    bind=, b, exec,  ~/.config/scripts/bookman.sh --open
    bind=, b, submap, reset
    bind=, v, exec, ~/.config/scripts/mpv.sh
    bind=, v, submap, reset
    bind=, q, exec, ~/.config/scripts/power.sh
    bind=, q, submap, reset
    bind=, w, exec,  ~/.config/scripts/wallpaper.sh --select
    bind=, w, submap, reset
    bind=, y, submap, yank
    
    bind=, e, exec, ~/.config/scripts/emoji.sh
    bind=, e, submap, reset

    bind=, Return, submap, reset
    bind=, Escape, submap, reset
    bind=, d, exec, ~/projects/repos/dashboard/main.py & disown
    bind=, d, submap, reset

submap=reset 

submap=yank
bind=, b, exec,  ~/.config/scripts/bookman.sh --yank
bind=, b, submap, reset
bind=, Return, submap ,reset
bind=, Escape, submap ,reset
submap=reset

submap=focus
bind=$mainMod, l, movefocus, right
bind=$mainMod, j, movefocus, down
bind=$mainMod, k, movefocus, up
bind=$mainMod, h, movefocus, left
bind=$mainMod Shift, Return, exec, $emacs_clock_out
bind=$mainMod Shift, Return, exec, ~/.config/scripts/set_time.
bind=$mainMod Shift, Return, submap, reset
bind=$mainMod, d, exec, $menu
submap=reset

bind=$mainMod Shift Control, f, exec, $emacs_clock_in
bind=$mainMod Shift Control, f, submap, focus

bind=,Print,exec, grimshot savecopy area
bind=,XF86AudioLowerVolume,exec,pactl -- set-sink-volume 0 -5%; volume=$(awk -F"[][]" '/Left:/ { print $2 }' <(amixer sget Master)); notify-send "volume "
bind=,XF86AudioRaiseVolume,exec,pactl -- set-sink-volume 0 +5%
bind=,XF86AudioPlay,exec,mpc toggle
bind=,XF86AudioPrev,exec,mpc prev
bind=,XF86AudioNext,exec,mpc next


#SPECIAL
bind=$mainMod Shift,W,movetoworkspace,special:work
bind=$mainMod ,W,togglespecialworkspace,work


# SHOWSTUFF
bind=$mainMod SHIFT,b,exec,~/.config/scripts/showstuff battery
bind=$mainMod SHIFT,t,exec,~/.config/scripts/showstuff time

exec-once=foot --server
exec-once=mpd
exec-once=dunst
exec-once= ~/.config/scripts/launchstuff.sh --bar
exec-once= ~/.config/scripts/wallpaper.sh --set
exec-once= ~/.config/scripts/lowbattery.sh
exec-once=tmux new -s init -d 
exec-once=wl-paste --watch cliphist store
exec-once=emacs --daemon
exec-once= gsettings set org.gtk.Settings.FileChooser window-size '(1200, 700)'
exec-once=gsettings set org.gnome.desktop.interface font-name 'Iosevka Comfy'
exec-once=/usr/libexec/flatpak-portal --no-idle-exit -r
exec-once=gentoo-pipewire-launcher restart
exec-once=/usr/libexec/xdg-desktop-portal-gtk -r
exec-once=xhost +SI:localuser:$(id -un)
exec-once=xhost +SI:localuser:root
exec-once=tmux new -s init -d 

# exec-once=nwg-dock-hyprland -i 24 -r
exec=notify-send -a "" "config reloaded"
